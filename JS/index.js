const ul=document.querySelector(".buttons");let allPages=Math.ceil(826/12),id=1,fetchMorty=async()=>{let e=[];for(let t=0;t<12;t++)if(id<=826){let a=fetch(`https://rickandmortyapi.com/api/character/${id}`).then(e=>e.json());e.push(a),id++}else break;try{let n=await Promise.all(e);for(let l=0;l<n.length;l++){let i=cargarNuevaCarta();showPerson(i,n[l])}}catch(s){console.log(s),alert("Ha ocurrido un error al cargar los personajes")}};const limpiarAlmacenamiento=()=>{localStorage.clear(),sessionStorage.clear();let e=document.cookie.split(";");for(let t=0;t<e.length;t++){let a=e[t],n=a.indexOf("="),l=n>-1?a.substr(0,n):a;document.cookie=`${l}=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;`}};function cargarNuevaCarta(){let e=document.createElement("div");e.classList.add("personaje");let t=document.createElement("h3");t.id="status",e.appendChild(t);let a=document.createElement("div");a.classList.add("image"),e.appendChild(a);let n=document.createElement("img");n.id="image",a.appendChild(n);let l=document.createElement("div");l.classList.add("datos"),e.appendChild(l);let i=document.createElement("h3");i.id="name",l.appendChild(i);let s=document.createElement("h3");s.id="specie",l.appendChild(s);let r=document.createElement("h3");r.id="origen",l.appendChild(r);let c=document.createElement("h3");return c.id="location",l.appendChild(c),document.getElementById("personajes").appendChild(e),e}let showPerson=(e,t)=>{let a=e.querySelector("#name"),n=e.querySelector("#image"),l=e.querySelector("#specie"),i=e.querySelector("#status"),s=e.querySelector("#origen"),r=e.querySelector("#location");a.innerHTML=t.name+t.id,n.src=t.image,l.innerHTML=t.species;let c=document.createElement("img");c.src="Male"===t.gender?"https://cdn.icon-icons.com/icons2/510/PNG/512/man_icon-icons.com_50102.png":"https://cdn.icon-icons.com/icons2/510/PNG/512/woman_icon-icons.com_49954.png",c.style.width="20px",c.style.height="20px",c.style.position="relative",c.style.top="4px",l.appendChild(c),"Alive"===t.status?i.classList.add("alive"):"Dead"===t.status?i.classList.add("dead"):"unknown"===t.status&&i.classList.add("unknown"),i.innerHTML=t.status,s.innerHTML=t.origin.name,r.innerHTML=t.location.name};function elem(e,t){let a="",n=t-2,l=t+2,i;t>1&&(a+=`<button class="btn" onclick="elem(allPages, ${t-1})">Prev</button>`);for(let s=n;s<=l;s++)!(s<1)&&!(s>e)&&(a+=`<button class="btn ${i=t==s?"active":""}" onclick="elem(allPages, ${s})">${s}</button>`);t<e&&(a+=`<button class="btn" onclick="elem(allPages, ${t+1})">Next</button>`),document.getElementById("personajes").innerHTML="",id=12*t-12+1,fetchMorty(),ul.innerHTML=a}elem(allPages,1),limpiarAlmacenamiento();const searchInput=document.getElementById("buscardor");searchInput.addEventListener("keyup",()=>{let e=searchInput.value.trim();console.log("."+e+"."),0===e.length&&(id=1,document.getElementById("personajes").innerHTML="",elem(allPages,1)),fetch(`https://rickandmortyapi.com/api/character/?name=${e}`).then(e=>e.json()).then(e=>{document.getElementById("personajes").innerHTML="",e.results.forEach(e=>{let t=cargarNuevaCarta();showPerson(t,e)})}).catch(e=>console.log(e))});